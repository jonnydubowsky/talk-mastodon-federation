<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Activity Pub & Mastodon!</title>
    <style>
     body {
       font-weight: 800;
       line-height: 1.55;
       color: #222;
     }
     p, li {
       font-size: 1.8rem;
     }
     .bg-cover {
       background-size: cover !important;
     }
     .light-text {
       color: #eee;
       text-shadow: 2px 2px 0px #222;
     }
     .img-m {
       width: 800px;
     }
     .img-m img {
       width: 100%;
     }
     .light-shadow {
       text-shadow: 2px 2px 0px white;
     }
     a {
       color: inherit;
       text-decoration: none;
       border-bottom: 2px dotted #2b90d9;
       transition: color 100ms ease, border 100ms ease;
     }
     a:hover,
     a:active {
       color: #2b90d9;
       border-bottom-style: solid;
     }
     .small {
       font-size: 1rem;
       font-weight: 400;
     }
     code {
       line-height: 2;
     }
     .remark-inline-code {
       background-color: #ddd;
     }
    </style>
  </head>
  <body>
    <textarea id="source">
      background-image: url(assets/elephant-friend.png)
      background-size: 100%%
      class: center, middle

      .light-shadow[
      # Activity Pub & Mastodon]

      HFYAO - [lislis](https://github.com/lislis) - July 2018

      ---

      background-image: url(assets/lis-sidewalk.jpg)
      class: bg-cover

      .light-text[
      # Hi, I'm Lisa]

      --

      .light-text[
      ### lislis@toot.cat (Mastodon)]

      --

      .light-text[
      ### lis@wk3.org (diaspora*)]

      --

      .light-text[
      ### mail@lislis.de (email)]

      --

      .light-text[
      ### lislis (GitHub|GitLab)]

      ---

      background-image: url(assets/joinmastodon.png)

      ---

      # Mastodon

      --

      - open source, decentralized micro-blogging framework

      --

      - published in October 2016 by [Gargron](https://github.com/Gargron)

      --

      - available at [github.com/tootsuite/mastodon](https://github.com/tootsuite/mastodon) under AGPL-3.0

      --

      - huge mainstream success

      ---

      # Goals of Mastodon

      --

      - safe space for people and their communities

      --

      - people in control, not companies

      --

      - learn from the mistakes of other social networks

      ---

      background-image: url(assets/mastodon-screenshot.png)

      ---

      # Community and culture

      --

      - instance culture (check `instance.tld/about/more`)

      --

      - toot, awoo and birdsite

      --

      - sensitive media, content warnings

      --

      Extensive guide in [this gist by joyeusenoelle](https://gist.github.com/joyeusenoelle/74f6e6c0f349651349a0df9ae4582969#what-are-the-rules)

      --

      ## And bots!

      ---

      background-image: url(assets/kazha.png)

      ---

      background-image: url(assets/marx-self-care.png)

      ---

      background-image: url(assets/owl-statue.png)

      ---

      # How does it work?

      --

      - host your own instance or join a public one

      --

      - follow people on your own instance or on any other

      --

      - toot what what's on your mind

      --

      - your toot appears in your subscribers' timeline **

      .small[** depending on your privacy settings]

      ---

      # Think of e-mail!

      --

      - Unique identifier across the network

      --

        &rArr; username@instance.tld

      --

      - Servers know how to find people on other servers

      ---

      class: center, middle
      # Ok, how does _that_ work?

      ---

      background-image: url(assets/magic.gif)
      class: bg-cover, light-text, middle, center

      # Federation

      ---

      # A brief history of federation

      --

      - OStatus
        .img-m[
          ![ostatus](assets/ostatus.png)]

      ---

      # A brief history of federation

      - OStatus

        - collection of standards for decentralized social networking

      --

        - PubSubHubbub (now WebSub), ActivityStreams, Salmon, Portable Contacts, Webfinger

      --

      - implemented by Status.net, Identi.ca

      --

      - Status.net was merged in GNU Social

      ---

      # A brief history of federation

      --
      - Identi.ca switched to protocol developed by [pump.io](http://pump.io/) and [MediaGoblin](https://mediagoblin.org/)

      --

      - W3C (Community WG, opened 2012) supposed to further develop the OStatus standard

      --

      -  Federated Social Web WG (opened 2014) chooses ActivityPub (based on pump.io's adaption of OStatus) as official successor to the OStatus standard

      --

      - [ActivityPub](https://www.w3.org/TR/activitypub/) is now the W3C recommendation ðŸŽ‰

      ---

      # Who implements ActivityPub/ OStatus?

      - [GNU Social](https://www.gnu.org/software/social/)

      - [Friendica](https://friendi.ca/)

      - [Hubzilla](https://project.hubzilla.org/page/hubzilla/hubzilla-project)

      - [Mastodon](https://joinmastodon.org/)

      and probably a lot more!

      ---

      # How does ActivityPub work?

      --

      - Server to server federation protocol

      --

      - Client to server protocol

      --

      .small[_Illustrations and examples taken from https://www.w3.org/TR/activitypub/_]

      ---

      background-image: url(assets/tutorial-1.png)

      ### Every 'actor' has an inbox and outbox

      ---

      ### Example ActivityPub actor

      ```json
      {"@context": "https://www.w3.org/ns/activitystreams",
      "type": "Person",
      "id": "https://social.example/alyssa/",
      "name": "Alyssa P. Hacker",
      "preferredUsername": "alyssa",
      "summary": "Lisp enthusiast hailing from MIT",
      "inbox": "https://social.example/alyssa/inbox/",
      "outbox": "https://social.example/alyssa/outbox/",
      "followers": "https://social.example/alyssa/followers/",
      "following": "https://social.example/alyssa/following/",
      "liked": "https://social.example/alyssa/liked/"}
      ```

      ---

      background-image: url(assets/tutorial-2.png)

      ### Communicating with the outside world via HTTP

      ---

      ### Example POST'ing a note to Ben

      ```json
      {"@context": "https://www.w3.org/ns/activitystreams",
      "type": "Note",
      "to": ["https://chatty.example/ben/"],
      "attributedTo": "https://social.example/alyssa/",
      "content": "Say, did you finish reading that book I lent you?"}
      ```

      .center[![tutorial 3](assets/tutorial-3.png)]

      ---

      ### Wrapping it in a `Create` activity

      ```json
      {"@context": "https://www.w3.org/ns/activitystreams",
      "type": "Create",
      "id": "https://social.example/alyssa/posts/a29a6843-9feb-4c74-a7f7-081b9c9201d3",
      "to": ["https://chatty.example/ben/"],
      "actor": "https://social.example/alyssa/",
      "object": {"type": "Note",
            "id": "https://social.example/alyssa/posts/49e2d03d-b53a-4c4c-a95c-94a6abf45a19",
            "attributedTo": "https://social.example/alyssa/",
            "to": ["https://chatty.example/ben/"],
            "content": "Say, did you finish reading that book I lent you?"}}
      ```

      ---

      ## Why wrap the `Note`?

      --

      - ActivityPub follows the pattern of 'activities being taken on objects by actors'

      --

      - ActivityStreams provides the [list of available activities (vocabulary)](https://www.w3.org/TR/activitystreams-vocabulary/)

      --

      - Extensible through [JSON LD](https://json-ld.org/)

      ---

      background-image: url(assets/vocabulary.png)
      ## Activity vocabulary

      ---

      ### The server looks up Ben's ActivityStreams object, gets the inbox and POST's the message

      .center[
      ![server to inbox](assets/tutorial-4.png)]

      ---

      ### Ben replies

      ```json
      {"@context": "https://www.w3.org/ns/activitystreams",
      "type": "Create",
      "id": "https://chatty.example/ben/p/51086",
      "to": ["https://social.example/alyssa/"],
      "actor": "https://chatty.example/ben/",
      "object": {"type": "Note",
            "id": "https://chatty.example/ben/p/51085",
            "attributedTo": "https://chatty.example/ben/",
            "to": ["https://social.example/alyssa/"],
            "inReplyTo": "https://social.example/alyssa/posts/49e2d03d-b53a-4c4c-a95c-94a6abf45a19",
            "content": "<p>Argh, yeah, sorry, I'll get it back to you tomorrow.</p>
                        <p>I was reviewing the section on register machines,
                           since it's been a while since I wrote one.</p>"}}
      ```
      ---

      ### Like!

      ```json
      {"@context": "https://www.w3.org/ns/activitystreams",
      "type": "Like",
      "id": "https://social.example/alyssa/posts/5312e10e-5110-42e5-a09b-934882b3ecec",
      "to": ["https://chatty.example/ben/"],
      "actor": "https://social.example/alyssa/",
      "object": "https://chatty.example/ben/p/51086"}
      ```
      ---

      background-image: url(assets/mindblown.gif)
      class: bg-cover

      ---

      # Rubbby!

      Mastodon is a standard Ruby on Rails app.

      Find a reference ActivityPub implementation eg here

      [`/app/controllers/activitypub/`](https://github.com/tootsuite/mastodon/tree/master/app/controllers/activitypub)

      ---

      # Rrrrrust!

      Apparently people started building a thing in Rust with Rocket!

      https://github.com/rustodon/rustodon

      ---

      # What about the safe space?

      --

      Custom [protocol extensions](https://github.com/tootsuite/documentation/blob/master/Extensions.md), federation only within Mastodon

      --

      - blocks/unblocks

      --

      - sensitive media

      --

      - content warnings

      --

      - other privacy features: locked accounts, status privacy, follow requests

      ---

      ## Looking up people with Webfinger

      --

      - [Webfinger RFC](https://tools.ietf.org/html/rfc7033)

      --

      - Ruby implementation [`Goldfinger`](https://github.com/tootsuite/goldfinger)

      --

      - try in your browser

        `https://your.instance/.well-known/webfinger?resource=acct:you@your.instance`

      ---

      # Thank  you!

      ### Join the Federation today!

      Elephant images from the [Mastodon press kit](https://joinmastodon.org/press-kit.zip)

      -

      Slides available at https://lislis.de/talks/mastodon-federation

      and on https://github.com/lislis/hfyao-federation

    </textarea>
    <script src="remark.min.js"></script>
    <script>var slideshow = remark.create({ratio: '16:9'});</script>
  </body>
</html>
